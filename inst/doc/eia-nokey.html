<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Package overview</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Package overview</h1>



<p>This vignette provides a brief overview to the most important functions in <code>eia</code>. Other vignettes go into greater depth on specific topics and API endpoints.</p>
<p><em>Note: This package version of the introduction vignette does not show the results of examples. Code is not executed because an API key is not present. See the full set of examples with code execution at the package <a href="https://leonawicz.github.io/eia/">website</a></em></p>
<div id="api-key" class="section level2">
<h2>API key</h2>
<div id="register-a-key-with-eia" class="section level3">
<h3>Register a key with EIA</h3>
<p>Obtaining an API key is easy and free.</p>
<p>Pulling data from the US Energy Information Administration (EIA) API requires a registered API key. A key can be obtained at no cost <a href="https://www.eia.gov/opendata/register.php">here</a>. A valid email and agreement to the API Terms of Service is required to obtain a key.</p>
<p>It is important to store your API key somewhere secure. Do not commit it to a repository or otherwise share it. For example, you could store it in your <code>.Renviron</code> file.</p>
</div>
<div id="key-storage-and-retrieval" class="section level3">
<h3>Key storage and retrieval</h3>
<p>You can always provide the <code>key</code> argument to every API function call, but you do not have to. There are getter and setter helpers available to make using <code>eia</code> functions a more seamless experience.</p>
<p><code>eia_set_key</code> gives you the option of storing your key for the duration of your R session:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(eia)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># eia_set_key(&quot;yourkey&quot;)</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co"># eia_get_key() # retrieve it</span></a></code></pre></div>
<p>If the key already exists in the system environment and you plan to pass <code>key</code> to functions explicitly, you could start as follows:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">key &lt;-<span class="st"> </span><span class="kw">Sys.getenv</span>(<span class="st">&quot;EIA_KEY&quot;</span>)</a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co"># or:</span></a>
<a class="sourceLine" id="cb2-4" title="4">key &lt;-<span class="st"> </span><span class="kw">eia_get_key</span>()</a></code></pre></div>
<p>See the vignette on API details for more information about all the options you have for key storage.</p>
</div>
</div>
<div id="eia-categories" class="section level2">
<h2>EIA categories</h2>
<p>Once you have your EIA registered API key and have it in place for your R session by whichever method you prefer, you are ready to begin accessing data from the EIA API.</p>
<p>It is helpful to be aware of various categories of data that are available. Each category has a unique ID number that is required to access associated data. The first call below does not include an ID. The result is a list of two data frames. The first is metadata associated with that position in the category hierarchy. The second is the child category information.</p>
<p>Here is the top-level category information:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">eia_cats</span>()</a></code></pre></div>
<p>The child category IDs can be used to query results from that category.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">eia_cats</span>(<span class="dv">0</span>)</a></code></pre></div>
</div>
<div id="eia-time-series-data" class="section level2">
<h2>EIA time series data</h2>
<p>Time series data is obtained by series ID. Most columns contain metadata. The <code>data</code> column contains the time series data.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">id &lt;-<span class="st"> &quot;ELEC.GEN.ALL-AK-99.A&quot;</span></a>
<a class="sourceLine" id="cb5-2" title="2">(x1 &lt;-<span class="st"> </span><span class="kw">eia_series</span>(id, <span class="dt">n =</span> <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4">x1<span class="op">$</span>data[[<span class="dv">1</span>]]</a></code></pre></div>
<p>You can provide arguments like the following:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">eia_series</span>(id) <span class="co"># max results</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">eia_series</span>(id, <span class="dt">n =</span> <span class="dv">5</span>) <span class="co"># most recent five</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">eia_series</span>(id, <span class="dt">end =</span> <span class="dv">2016</span>, <span class="dt">n =</span> <span class="dv">5</span>) <span class="co"># ending in 2016</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="kw">eia_series</span>(id, <span class="dt">start =</span> <span class="dv">2000</span>, <span class="dt">end =</span> <span class="dv">2016</span>) <span class="co"># specific period</span></a></code></pre></div>
<p>As with <code>eia_cats</code>, the output format does not need to be tidy:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">eia_series</span>(id, <span class="dt">n =</span> <span class="dv">5</span>, <span class="dt">tidy =</span> <span class="ot">FALSE</span>) <span class="co"># results of jsonlite::fromJSON</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">eia_series</span>(id, <span class="dt">n =</span> <span class="dv">5</span>, <span class="dt">tidy =</span> <span class="ot">NA</span>) <span class="co"># origina JSON as character string</span></a></code></pre></div>
<p>This allows you to use the returned results with existing code you may have that requires data in one of these less processed structures.</p>
</div>
<div id="eia-geosets" class="section level2">
<h2>EIA geosets</h2>
<p>Geosets are metadata structures organizing time series datasets that can be mapped. Arguments to <code>eia_geoset</code> are the same as <code>eia_series</code> with the addition of <code>region</code>. Like <code>id</code>, <code>region</code> can be a vector. Most of the details are the same as before.</p>
<p>In the example below using total electricity generation, get the last two data points for each of and two US states. <code>dplyr</code> and <code>tidyr</code> are used here to clean up the result a bit for purposes of display.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">id &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ELEC.GEN.ALL-99.A&quot;</span>)</a>
<a class="sourceLine" id="cb8-2" title="2">region &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;USA-CA&quot;</span>, <span class="st">&quot;USA-NY&quot;</span>)</a>
<a class="sourceLine" id="cb8-3" title="3">(x &lt;-<span class="st"> </span><span class="kw">eia_geoset</span>(id, region, <span class="dt">n =</span> <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb8-4" title="4"></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="kw">library</span>(dplyr)</a>
<a class="sourceLine" id="cb8-6" title="6"><span class="kw">library</span>(tidyr)</a>
<a class="sourceLine" id="cb8-7" title="7"><span class="kw">select</span>(x, region, data) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unnest</span>()</a></code></pre></div>
<p>Another convenience of <code>eia_geoset</code> is the ability to provide regions in the following forms:</p>
<ul>
<li>2-character US state abbreviations</li>
<li>State names</li>
<li>US Census region names</li>
<li>US census division names</li>
</ul>
<p>These shortcuts make it easier to construct an API call involving several states:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">region &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;AK&quot;</span>, <span class="st">&quot;New England&quot;</span>)</a>
<a class="sourceLine" id="cb9-2" title="2">(x &lt;-<span class="st"> </span><span class="kw">eia_geoset</span>(id, region, <span class="dt">n =</span> <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb9-3" title="3"></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="kw">select</span>(x, region, data) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unnest</span>()</a></code></pre></div>
<p>Even more convenient is that these names are available in R. See the <code>datasets::state.*</code> functions and the geoset vignette.</p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
